<html>

<head>

  <script type="text/javascript">
      var patient = {};
      var ObjectId = ObjectId ||  function(id, value) { return 1; };
      var emitted = emitted || []
      var emit = emit || function(id, value) { emitted.push(value) };
      var effective_date = effective_date || 1356998340;
      var enable_logging = false;
      var enable_rationale = false;
  
      function execute() {
     	emitted=[];
      	for (var i = 0; i < 100; i++) {
        	hqmfjs={};
      	    _.each(patients, calculate_<%=measure_id%>)
      	}
      }

      function profile() {
     	emitted=[];
     	if (window.console && window.console.profile) {
	        console.profile("<%=measure_id%> profile");
	      	for (var i = 0; i < 100; i++) {
	        	hqmfjs={};
	      	    _.each(patients, calculate_<%=measure_id%>)
	      	}
	        console.profileEnd();
        }
      }

  </script>
  <script type="text/javascript" src="./libraries/hqmf_utils.js"></script>
  <script type="text/javascript" src="./libraries/map_reduce_utils.js"></script>

  <script src="./patients.js" type="text/javascript"></script>
  <script type="text/javascript" src="./js/<%=measure_id%>.js"></script>



</head>

  <a href="javascript:execute(); alert('calculated: ' + emitted.length)">execute</a><br/><br/>
  <a href="javascript:profile();">profile</a><br/>

</html>